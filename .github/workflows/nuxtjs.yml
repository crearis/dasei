# Sample workflow for building and deploying a Nuxt site to GitHub Pages
#
# To get started with Nuxt see: https://nuxtjs.org/docs/get-started/installation
#
name: Deploy Nuxt site to Pages
on:
  push: 
  branches: [ dasei ]
  permissions:
   contents: read
   pages: write
   id-token: write
jobs:
  build:
  environment:
  name: github-pages
    url: ${{steps.deployment.outputs.page_url}}
runs-on: ubuntu-latest
strategy:
  matrix:
    node-version: [20]
steps:
  - uses: actions/checkout@v3
  - uses: pnpm/action-setup@v2
    with:
      version: 7
  - name: Use Node.js ${{ matrix.node-version }}
    uses: actions/setup-node@v3
    with:
      node-version: ${{ matrix.node-version }}
      cache: pnpm
  - name: Install dependencies
    run: pnpm install
  - name: Build
    run: pnpm run build
  - name: Setup Pages
    uses: actions/configure-pages@v3
  - name: Upload artifact
    uses: actions/upload-pages-artifact@v1
    with:
      # Upload dist repository
       path: ./dist
  - name: Deploy to GitHub Pages
    id: deployment
    uses: actions/deploy-pages@v1
